# ETHæ‰¹é‡è½¬è´¦ç³»ç»Ÿ - å‰ç«¯éƒ¨ç½²æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: ETHæ‰¹é‡è½¬è´¦ç³»ç»Ÿå‰ç«¯åº”ç”¨  
**æŠ€æœ¯æ ˆ**: React 18 + TypeScript + Vite + Ant Design + Web3  
**ç‰ˆæœ¬**: 1.0.0  
**Node.jsè¦æ±‚**: >=18.0.0  
**npmè¦æ±‚**: >=9.0.0

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **å‰ç«¯æ¡†æ¶**: React 18.2.0 + TypeScript 5.2.2
- **æ„å»ºå·¥å…·**: Vite 5.0.0
- **UIç»„ä»¶åº“**: Ant Design 5.12.8 + Ant Design Pro Components
- **æ ·å¼æ–¹æ¡ˆ**: Tailwind CSS + WindiCSS
- **Web3é›†æˆ**: Wagmi 2.16.0 + ethers.js 6.8.1 + RainbowKit
- **çŠ¶æ€ç®¡ç†**: Zustand 4.4.7
- **è·¯ç”±**: React Router DOM 6.20.1
- **æ•°æ®è¯·æ±‚**: Axios + TanStack React Query
- **å›¾è¡¨**: Recharts 2.8.0

### é¡¹ç›®ç»“æ„
```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # ç»„ä»¶
â”‚   â”‚   â””â”€â”€ layout/         # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ pages/              # é¡µé¢
â”‚   â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰Hook
â”‚   â”œâ”€â”€ store/              # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ constants/          # å¸¸é‡é…ç½®
â”‚   â”œâ”€â”€ providers/          # ä¸Šä¸‹æ–‡æä¾›è€…
â”‚   â””â”€â”€ styles/             # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”œâ”€â”€ dist/                   # æ„å»ºè¾“å‡º
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â”œâ”€â”€ vite.config.ts         # Viteé…ç½®
â”œâ”€â”€ tsconfig.json          # TypeScripté…ç½®
â””â”€â”€ index.html             # å…¥å£HTML
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

#### ç³»ç»Ÿè¦æ±‚
- **Node.js**: >= 18.0.0
- **npm**: >= 9.0.0 (æˆ–ä½¿ç”¨ yarn/pnpm)
- **Git**: æœ€æ–°ç‰ˆæœ¬

#### æ£€æŸ¥ç¯å¢ƒ
```bash
# æ£€æŸ¥Node.jsç‰ˆæœ¬
node --version

# æ£€æŸ¥npmç‰ˆæœ¬
npm --version

# æ£€æŸ¥Gitç‰ˆæœ¬
git --version
```

### 2. é¡¹ç›®å®‰è£…

#### å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/webthree/batch-transfer.git
cd batch-transfer/frontend
```

#### å®‰è£…ä¾èµ–
```bash
# ä½¿ç”¨npm
npm install

# æˆ–ä½¿ç”¨yarn
yarn install

# æˆ–ä½¿ç”¨pnpm
pnpm install
```

### 3. å¼€å‘ç¯å¢ƒè¿è¡Œ

#### å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:3000` å¯åŠ¨ï¼Œæ”¯æŒï¼š
- ğŸ”¥ çƒ­æ¨¡å—é‡è½½ (HMR)
- ğŸ” ESLintå®æ—¶æ£€æŸ¥
- ğŸ¯ APIä»£ç†åˆ°åç«¯ (localhost:8080)
- ğŸ“± ç§»åŠ¨ç«¯è°ƒè¯•æ”¯æŒ

#### å…¶ä»–å¼€å‘å‘½ä»¤
```bash
# ç±»å‹æ£€æŸ¥
npm run type-check

# ä»£ç æ ¼å¼æ£€æŸ¥
npm run format:check

# ä»£ç æ ¼å¼ä¿®å¤
npm run format

# ESLintæ£€æŸ¥
npm run lint

# ESLintä¿®å¤
npm run lint:fix

# è¿è¡Œæµ‹è¯•
npm run test

# æµ‹è¯•è¦†ç›–ç‡
npm run test:coverage

# æµ‹è¯•UIç•Œé¢
npm run test:ui
```

## ğŸ“¦ ç”Ÿäº§æ„å»º

### 1. æ„å»ºé¡¹ç›®

```bash
# ç”Ÿäº§æ„å»º
npm run build
```

æ„å»ºè¿‡ç¨‹åŒ…æ‹¬ï¼š
- âœ… TypeScriptç±»å‹æ£€æŸ¥
- ğŸ“¦ ä»£ç æ‰“åŒ…å’Œå‹ç¼©
- ğŸ¯ è‡ªåŠ¨ä»£ç åˆ†å‰²
- ğŸ—œï¸ èµ„æºä¼˜åŒ–
- ğŸ“Š ç”Ÿæˆæ„å»ºåˆ†ææŠ¥å‘Š

### 2. æ„å»ºè¾“å‡º

æ„å»ºå®Œæˆåï¼Œäº§ç‰©ä½äº `dist/` ç›®å½•ï¼š

```
dist/
â”œâ”€â”€ index.html              # å…¥å£HTMLæ–‡ä»¶
â”œâ”€â”€ js/                     # JavaScriptæ–‡ä»¶
â”‚   â”œâ”€â”€ main-[hash].js     # ä¸»å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ react-vendor-[hash].js    # Reactç›¸å…³åº“
â”‚   â”œâ”€â”€ ui-vendor-[hash].js       # UIç»„ä»¶åº“
â”‚   â”œâ”€â”€ web3-vendor-[hash].js     # Web3ç›¸å…³åº“
â”‚   â””â”€â”€ utils-vendor-[hash].js    # å·¥å…·åº“
â”œâ”€â”€ css/                    # CSSæ ·å¼æ–‡ä»¶
â”œâ”€â”€ images/                 # å›¾ç‰‡èµ„æº
â”œâ”€â”€ fonts/                  # å­—ä½“æ–‡ä»¶
â””â”€â”€ stats.html             # æ‰“åŒ…åˆ†ææŠ¥å‘Š
```

### 3. æ„å»ºåˆ†æ

æŸ¥çœ‹æ‰“åŒ…åˆ†ææŠ¥å‘Šï¼š
```bash
npm run analyze
```

æˆ–ç›´æ¥æ‰“å¼€ `dist/stats.html` æ–‡ä»¶ã€‚

### 4. æœ¬åœ°é¢„è§ˆ

```bash
npm run preview
```

åœ¨ `http://localhost:3000` é¢„è§ˆç”Ÿäº§æ„å»ºç‰ˆæœ¬ã€‚

## ğŸŒ éƒ¨ç½²æŒ‡å—

### 1. é™æ€æ–‡ä»¶éƒ¨ç½²

#### Nginxéƒ¨ç½²

**nginx.conf é…ç½®ç¤ºä¾‹ï¼š**
```nginx
server {
    listen 80;
    server_name your-domain.com;
    root /var/www/batch-transfer;
    index index.html;

    # å¯ç”¨gzipå‹ç¼©
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json;

    # é™æ€èµ„æºç¼“å­˜
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # HTMLæ–‡ä»¶ä¸ç¼“å­˜
    location ~* \.html$ {
        expires -1;
        add_header Cache-Control "no-cache, no-store, must-revalidate";
    }

    # React Routeræ”¯æŒ
    location / {
        try_files $uri $uri/ /index.html;
    }

    # APIä»£ç†åˆ°åç«¯
    location /api {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # WebSocketæ”¯æŒ
    location /ws {
        proxy_pass http://localhost:8080;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
    }
}
```

**éƒ¨ç½²æ­¥éª¤ï¼š**
```bash
# 1. æ„å»ºé¡¹ç›®
npm run build

# 2. ä¸Šä¼ æ„å»ºæ–‡ä»¶
scp -r dist/* user@your-server:/var/www/batch-transfer/

# 3. é‡å¯Nginx
sudo systemctl reload nginx
```

#### Apacheéƒ¨ç½²

**.htaccess é…ç½®ï¼š**
```apache
RewriteEngine On

# React Routeræ”¯æŒ
RewriteBase /
RewriteRule ^index\.html$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.html [L]

# é™æ€èµ„æºç¼“å­˜
<filesMatch "\.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$">
    ExpiresActive On
    ExpiresDefault "access plus 1 year"
    Header append Cache-Control "public"
</filesMatch>

# HTMLæ–‡ä»¶ä¸ç¼“å­˜
<filesMatch "\.html$">
    ExpiresActive On
    ExpiresDefault "access plus 0 seconds"
    Header set Cache-Control "no-cache, no-store, must-revalidate"
</filesMatch>

# å¯ç”¨å‹ç¼©
<ifModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</ifModule>
```

### 2. CDNéƒ¨ç½²

#### é˜¿é‡Œäº‘OSS + CDN

```bash
# å®‰è£…é˜¿é‡Œäº‘CLIå·¥å…·
npm install -g @alicloud/cli

# é…ç½®è®¿é—®å¯†é’¥
aliyun configure

# ä¸Šä¼ åˆ°OSS
aliyun oss cp -r dist/ oss://your-bucket/batch-transfer/ --include "*"

# åˆ·æ–°CDNç¼“å­˜
aliyun cdn refresh-object-caches --object-path https://your-cdn-domain.com/
```

#### è…¾è®¯äº‘COS + CDN

```bash
# å®‰è£…è…¾è®¯äº‘CLIå·¥å…·
npm install -g qcloud-cli

# é…ç½®å¯†é’¥
qcloud configure

# ä¸Šä¼ æ–‡ä»¶
coscmd upload -r dist/ /batch-transfer/

# åˆ·æ–°CDN
coscmd cdn purge https://your-cdn-domain.com/
```

### 3. Dockeréƒ¨ç½²

#### Dockerfile
```dockerfile
# æ„å»ºé˜¶æ®µ
FROM node:18-alpine as builder

WORKDIR /app

# å¤åˆ¶packageæ–‡ä»¶
COPY package*.json ./

# å®‰è£…ä¾èµ–
RUN npm ci --only=production

# å¤åˆ¶æºä»£ç 
COPY . .

# æ„å»ºåº”ç”¨
RUN npm run build

# ç”Ÿäº§é˜¶æ®µ
FROM nginx:alpine

# å¤åˆ¶æ„å»ºæ–‡ä»¶
COPY --from=builder /app/dist /usr/share/nginx/html

# å¤åˆ¶nginxé…ç½®
COPY nginx.conf /etc/nginx/conf.d/default.conf

# æš´éœ²ç«¯å£
EXPOSE 80

# å¯åŠ¨nginx
CMD ["nginx", "-g", "daemon off;"]
```

#### docker-compose.yml
```yaml
version: '3.8'

services:
  frontend:
    build: .
    ports:
      - "80:80"
    environment:
      - NODE_ENV=production
    restart: unless-stopped
    depends_on:
      - backend

  backend:
    image: your-backend-image
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=prod
```

#### éƒ¨ç½²å‘½ä»¤
```bash
# æ„å»ºé•œåƒ
docker build -t batch-transfer-frontend .

# è¿è¡Œå®¹å™¨
docker run -d -p 80:80 --name frontend batch-transfer-frontend

# æˆ–ä½¿ç”¨docker-compose
docker-compose up -d
```

### 4. Verceléƒ¨ç½²

#### vercel.jsoné…ç½®
```json
{
  "version": 2,
  "builds": [
    {
      "src": "package.json",
      "use": "@vercel/static-build",
      "config": {
        "distDir": "dist"
      }
    }
  ],
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "https://your-backend-api.com/api/$1"
    },
    {
      "src": "/(.*)",
      "dest": "/index.html"
    }
  ],
  "headers": [
    {
      "source": "/(.*)\\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=31536000, immutable"
        }
      ]
    }
  ]
}
```

#### éƒ¨ç½²æ­¥éª¤
```bash
# å®‰è£…Vercel CLI
npm install -g vercel

# ç™»å½•Vercel
vercel login

# éƒ¨ç½²
vercel --prod
```

### 5. Netlifyéƒ¨ç½²

#### netlify.tomlé…ç½®
```toml
[build]
  publish = "dist"
  command = "npm run build"

[[redirects]]
  from = "/api/*"
  to = "https://your-backend-api.com/api/:splat"
  status = 200

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

[[headers]]
  for = "*.js"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
  for = "*.css"
  [headers.values]
    Cache-Control = "public, max-age=31536000, immutable"
```

## âš™ï¸ ç¯å¢ƒé…ç½®

### 1. ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå¼€å‘ç¯å¢ƒï¼‰ï¼š
```bash
# APIé…ç½®
VITE_API_BASE_URL=http://localhost:8080/api
VITE_WS_BASE_URL=ws://localhost:8080/ws

# Web3é…ç½®
VITE_CHAIN_ID=1
VITE_RPC_URL=https://mainnet.infura.io/v3/your-project-id

# åŠŸèƒ½å¼€å…³
VITE_ENABLE_ANALYTICS=false
VITE_ENABLE_DEBUG=true

# ç‰ˆæœ¬ä¿¡æ¯
VITE_APP_VERSION=1.0.0
```

åˆ›å»º `.env.production` æ–‡ä»¶ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰ï¼š
```bash
# APIé…ç½®
VITE_API_BASE_URL=https://api.your-domain.com/api
VITE_WS_BASE_URL=wss://api.your-domain.com/ws

# Web3é…ç½®
VITE_CHAIN_ID=1
VITE_RPC_URL=https://mainnet.infura.io/v3/your-project-id

# åŠŸèƒ½å¼€å…³
VITE_ENABLE_ANALYTICS=true
VITE_ENABLE_DEBUG=false

# ç‰ˆæœ¬ä¿¡æ¯
VITE_APP_VERSION=1.0.0
```

### 2. ä»£ç†é…ç½®

vite.config.tsä¸­çš„ä»£ç†é…ç½®ï¼š
```typescript
server: {
  proxy: {
    '/api': {
      target: process.env.VITE_API_BASE_URL || 'http://localhost:8080',
      changeOrigin: true,
      secure: false,
    },
    '/ws': {
      target: process.env.VITE_WS_BASE_URL || 'ws://localhost:8080',
      ws: true,
      changeOrigin: true,
    },
  },
}
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ä¾èµ–å®‰è£…å¤±è´¥
```bash
# æ¸…é™¤ç¼“å­˜é‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm cache clean --force
npm install
```

#### 2. æ„å»ºå†…å­˜ä¸è¶³
```bash
# å¢åŠ Node.jså†…å­˜é™åˆ¶
export NODE_OPTIONS="--max-old-space-size=4096"
npm run build
```

#### 3. è·¯ç”±404é—®é¢˜
ç¡®ä¿æœåŠ¡å™¨é…ç½®äº†React Routerçš„å›é€€è·¯ç”±ï¼š
```nginx
location / {
    try_files $uri $uri/ /index.html;
}
```

#### 4. Web3è¿æ¥é—®é¢˜
æ£€æŸ¥ç½‘ç»œé…ç½®å’ŒRPCç«¯ç‚¹ï¼š
```typescript
// åœ¨å¼€å‘è€…å·¥å…·æ§åˆ¶å°æ£€æŸ¥
console.log('Current Chain ID:', window.ethereum?.chainId)
console.log('RPC URL:', process.env.VITE_RPC_URL)
```

#### 5. APIè¯·æ±‚è·¨åŸŸ
ç¡®ä¿åç«¯é…ç½®äº†CORSæˆ–ä½¿ç”¨ä»£ç†ï¼š
```bash
# æ£€æŸ¥ä»£ç†é…ç½®
curl -I http://localhost:3000/api/health
```

### æ€§èƒ½ä¼˜åŒ–

#### 1. æ‰“åŒ…åˆ†æ
```bash
npm run analyze
```

æŸ¥çœ‹æ‰“åŒ…æŠ¥å‘Šï¼Œä¼˜åŒ–å¤§ä½“ç§¯ä¾èµ–ã€‚

#### 2. ä»£ç åˆ†å‰²
ä½¿ç”¨React.lazyè¿›è¡Œç»„ä»¶æ‡’åŠ è½½ï¼š
```typescript
const Dashboard = React.lazy(() => import('./pages/Dashboard'))
```

#### 3. ç¼“å­˜ç­–ç•¥
- é™æ€èµ„æºï¼šé•¿æœŸç¼“å­˜ (1å¹´)
- HTMLæ–‡ä»¶ï¼šä¸ç¼“å­˜
- APIæ•°æ®ï¼šé€‚å½“ç¼“å­˜

#### 4. CDNä¼˜åŒ–
- ä½¿ç”¨CDNåŠ é€Ÿé™æ€èµ„æº
- å¯ç”¨gzip/brotliå‹ç¼©
- å›¾ç‰‡ä½¿ç”¨WebPæ ¼å¼

## ğŸ“Š ç›‘æ§ä¸ç»´æŠ¤

### 1. é”™è¯¯ç›‘æ§

é›†æˆSentryé”™è¯¯ç›‘æ§ï¼š
```bash
npm install @sentry/react
```

### 2. æ€§èƒ½ç›‘æ§

ä½¿ç”¨Web Vitalsç›‘æ§æ€§èƒ½ï¼š
```bash
npm install web-vitals
```

### 3. æ—¥å¿—æ”¶é›†

é…ç½®å‰ç«¯æ—¥å¿—æ”¶é›†ï¼š
```typescript
// ç”Ÿäº§ç¯å¢ƒæ—¥å¿—æ”¶é›†
if (import.meta.env.PROD) {
  // æ”¶é›†é”™è¯¯æ—¥å¿—
  window.addEventListener('error', (event) => {
    // å‘é€åˆ°æ—¥å¿—æœåŠ¡
  })
}
```

### 4. è‡ªåŠ¨åŒ–éƒ¨ç½²

GitHub Actionsé…ç½®ï¼š
```yaml
name: Deploy Frontend

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm'
    
    - name: Install dependencies
      run: npm ci
    
    - name: Run tests
      run: npm test
    
    - name: Build
      run: npm run build
    
    - name: Deploy
      # éƒ¨ç½²åˆ°æœåŠ¡å™¨
      run: |
        # éƒ¨ç½²è„šæœ¬
```

## ğŸ“š é™„å½•

### æµè§ˆå™¨æ”¯æŒ

- Chrome >= 88
- Firefox >= 78
- Safari >= 14
- Edge >= 88

### ç›¸å…³é“¾æ¥

- [Viteå®˜æ–¹æ–‡æ¡£](https://vitejs.dev/)
- [Reactå®˜æ–¹æ–‡æ¡£](https://react.dev/)
- [Ant Designæ–‡æ¡£](https://ant.design/)
- [Wagmiæ–‡æ¡£](https://wagmi.sh/)
- [é¡¹ç›®GitHubä»“åº“](https://github.com/webthree/batch-transfer)

### æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ï¼š
- é‚®ç®±: support@webthree.com
- GitHub Issues: https://github.com/webthree/batch-transfer/issues

---

**æœ€åæ›´æ–°**: 2024å¹´1æœˆ
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0